
// 2.0 Sea Egg - Ported from 2.0.7

freeslot(
	// Objects
	"MT_OLDTORPEDO",
	// States
	"S_21EGGMOBILE3_STND",
	"S_21EGGMOBILE3_ATK1",
	"S_21EGGMOBILE3_ATK2",
	"S_21EGGMOBILE3_ATK3A",
	"S_21EGGMOBILE3_ATK3B",
	"S_21EGGMOBILE3_ATK3C",
	"S_21EGGMOBILE3_ATK3D",
	"S_21EGGMOBILE3_ATK4",
	"S_21EGGMOBILE3_ATK5",
	"S_21EGGMOBILE3_LAUGH1",
	"S_21EGGMOBILE3_LAUGH2",
	"S_21EGGMOBILE3_LAUGH3",
	"S_21EGGMOBILE3_LAUGH4",
	"S_21EGGMOBILE3_LAUGH5",
	"S_21EGGMOBILE3_LAUGH6",
	"S_21EGGMOBILE3_LAUGH7",
	"S_21EGGMOBILE3_LAUGH8",
	"S_21EGGMOBILE3_LAUGH9",
	"S_21EGGMOBILE3_LAUGH10",
	"S_21EGGMOBILE3_LAUGH11",
	"S_21EGGMOBILE3_LAUGH12",
	"S_21EGGMOBILE3_LAUGH13",
	"S_21EGGMOBILE3_LAUGH14",
	"S_21EGGMOBILE3_LAUGH15",
	"S_21EGGMOBILE3_LAUGH16",
	"S_21EGGMOBILE3_LAUGH17",
	"S_21EGGMOBILE3_LAUGH18",
	"S_21EGGMOBILE3_LAUGH19",
	"S_21EGGMOBILE3_LAUGH20",
	"S_21EGGMOBILE3_PAIN",
	"S_21EGGMOBILE3_PAIN2",
	"S_21EGGMOBILE3_DIE1",
	"S_21EGGMOBILE3_DIE2",
	"S_21EGGMOBILE3_DIE3",
	"S_21EGGMOBILE3_DIE4",
	"S_21EGGMOBILE3_FLEE1",
	"S_21EGGMOBILE3_FLEE2",
	"S_OLDTORPEDO"
)

// A_Boss3TakeDamage ported from 2.1.25's p_enemy.c
function A_21Boss3TakeDamage(actor, var1, var2)
	actor.movecount = var1
	
	if actor.target and actor.target.spawnpoint
		actor.threshold = actor.target.spawnpoint.extrainfo
	end
end

states[S_21EGGMOBILE3_STND] =	{SPR_EGGO,	A,	1,	nil,	0,	0,	S_21EGGMOBILE3_STND}

states[S_21EGGMOBILE3_ATK1] =	{SPR_EGGO,	B,	2,	nil,			0,				0,	S_21EGGMOBILE3_ATK2}
states[S_21EGGMOBILE3_ATK2] =	{SPR_EGGO,	C,	2,	nil,			0,				0,	S_21EGGMOBILE3_ATK3A}
states[S_21EGGMOBILE3_ATK3A] =	{SPR_EGGO,	D,	2,	A_BossFireShot,	MT_OLDTORPEDO,	2,	S_21EGGMOBILE3_ATK3B}
states[S_21EGGMOBILE3_ATK3B] =	{SPR_EGGO,	D,	2,	A_BossFireShot,	MT_OLDTORPEDO,	4,	S_21EGGMOBILE3_ATK3C}
states[S_21EGGMOBILE3_ATK3C] =	{SPR_EGGO,	D,	2,	A_BossFireShot,	MT_OLDTORPEDO,	3,	S_21EGGMOBILE3_ATK3D}
states[S_21EGGMOBILE3_ATK3D] =	{SPR_EGGO,	D,	2,	A_BossFireShot,	MT_OLDTORPEDO,	5,	S_21EGGMOBILE3_ATK4}
states[S_21EGGMOBILE3_ATK4] =	{SPR_EGGO,	E,	2,	nil,			0,				0,	S_21EGGMOBILE3_ATK5}
states[S_21EGGMOBILE3_ATK5] =	{SPR_EGGO,	F,	2,	nil,			0,				0,	S_21EGGMOBILE3_LAUGH1}

states[S_21EGGMOBILE3_LAUGH1] =		{SPR_EGGO,	G,	4,	nil,	0,	0,	S_21EGGMOBILE3_LAUGH2}
states[S_21EGGMOBILE3_LAUGH2] =		{SPR_EGGO,	H,	4,	nil,	0,	0,	S_21EGGMOBILE3_LAUGH3}
states[S_21EGGMOBILE3_LAUGH3] =		{SPR_EGGO,	G,	4,	nil,	0,	0,	S_21EGGMOBILE3_LAUGH4}
states[S_21EGGMOBILE3_LAUGH4] =		{SPR_EGGO,	H,	4,	nil,	0,	0,	S_21EGGMOBILE3_LAUGH5}
states[S_21EGGMOBILE3_LAUGH5] =		{SPR_EGGO,	G,	4,	nil,	0,	0,	S_21EGGMOBILE3_LAUGH6}
states[S_21EGGMOBILE3_LAUGH6] =		{SPR_EGGO,	H,	4,	nil,	0,	0,	S_21EGGMOBILE3_LAUGH7}
states[S_21EGGMOBILE3_LAUGH7] =		{SPR_EGGO,	G,	4,	nil,	0,	0,	S_21EGGMOBILE3_LAUGH8}
states[S_21EGGMOBILE3_LAUGH8] =		{SPR_EGGO,	H,	4,	nil,	0,	0,	S_21EGGMOBILE3_LAUGH9}
states[S_21EGGMOBILE3_LAUGH9] =		{SPR_EGGO,	G,	4,	nil,	0,	0,	S_21EGGMOBILE3_LAUGH10}
states[S_21EGGMOBILE3_LAUGH10] =	{SPR_EGGO,	H,	4,	nil,	0,	0,	S_21EGGMOBILE3_LAUGH11}
states[S_21EGGMOBILE3_LAUGH11] =	{SPR_EGGO,	G,	4,	nil,	0,	0,	S_21EGGMOBILE3_LAUGH12}
states[S_21EGGMOBILE3_LAUGH12] =	{SPR_EGGO,	H,	4,	nil,	0,	0,	S_21EGGMOBILE3_LAUGH13}
states[S_21EGGMOBILE3_LAUGH13] =	{SPR_EGGO,	G,	4,	nil,	0,	0,	S_21EGGMOBILE3_LAUGH14}
states[S_21EGGMOBILE3_LAUGH14] =	{SPR_EGGO,	H,	4,	nil,	0,	0,	S_21EGGMOBILE3_LAUGH15}
states[S_21EGGMOBILE3_LAUGH15] =	{SPR_EGGO,	G,	4,	nil,	0,	0,	S_21EGGMOBILE3_LAUGH16}
states[S_21EGGMOBILE3_LAUGH16] =	{SPR_EGGO,	H,	4,	nil,	0,	0,	S_21EGGMOBILE3_LAUGH17}
states[S_21EGGMOBILE3_LAUGH17] =	{SPR_EGGO,	G,	4,	nil,	0,	0,	S_21EGGMOBILE3_LAUGH18}
states[S_21EGGMOBILE3_LAUGH18] =	{SPR_EGGO,	H,	4,	nil,	0,	0,	S_21EGGMOBILE3_LAUGH19}
states[S_21EGGMOBILE3_LAUGH19] =	{SPR_EGGO,	G,	4,	nil,	0,	0,	S_21EGGMOBILE3_LAUGH20}
states[S_21EGGMOBILE3_LAUGH20] =	{SPR_EGGO,	H,	4,	nil,	0,	0,	S_21EGGMOBILE3_STND}

states[S_21EGGMOBILE3_PAIN] =	{SPR_EGGO,	I,	1,	A_21Boss3TakeDamage,	0,	0,	S_21EGGMOBILE3_PAIN2}
states[S_21EGGMOBILE3_PAIN2] =	{SPR_EGGO,	I,	23,	A_Pain,					0,	0,	S_21EGGMOBILE3_STND}

states[S_21EGGMOBILE3_DIE1] =	{SPR_EGGO,	J,	8,	A_Fall,			0,	0,						S_21EGGMOBILE3_DIE2}
states[S_21EGGMOBILE3_DIE2] =	{SPR_EGGO,	J,	8,	A_BossScream,	0,	MT_BOSSEXPLODE,			S_21EGGMOBILE3_DIE3}
states[S_21EGGMOBILE3_DIE3] =	{SPR_EGGO,	J,	0,	A_Repeat,		12,	S_21EGGMOBILE3_DIE2,	S_21EGGMOBILE3_DIE4}
states[S_21EGGMOBILE3_DIE4] =	{SPR_EGGO,	J,	-1,	A_BossDeath,	0,	0,						S_NULL}

states[S_21EGGMOBILE3_FLEE1] =	{SPR_EGGO,	K,	5,	nil,	0,	0,	S_21EGGMOBILE3_FLEE2}
states[S_21EGGMOBILE3_FLEE2] =	{SPR_EGGO,	L,	5,	nil,	0,	0,	S_21EGGMOBILE3_FLEE1}

mobjinfo[MT_OLDTORPEDO] = {
	doomednum = -1,
	spawnstate = S_OLDTORPEDO,
	spawnhealth = 1000,
	seesound = sfx_rlaunc,
	reactiontime = 8,
	deathstate = S_MINE_BOOM1, // Make this a 2.1 variant if it changes in the future
	deathsound = sfx_cybdth,
	speed = 20*FRACUNIT,
	radius = 11*FRACUNIT,
	height = 8*FRACUNIT,
	mass = 100,
	damage = 20,
	flags = MF_NOBLOCKMAP|MF_MISSILE|MF_NOGRAVITY
}

states[S_OLDTORPEDO] =	{SPR_TORP,	A,	1,	A_SmokeTrailer,	MT_SMOKE,	0,	S_OLDTORPEDO}
